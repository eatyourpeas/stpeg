---
layout: default
---

<article class="event-page">
    <header class="event-header">
        <h1>{{ page.title }}</h1>
        <p class="event-date">{{ page.date | date: "%A, %B %d, %Y" }}</p>
        
        <div class="event-details">
            <p class="event-location"><strong>Location:</strong> {{ page.location }}</p>
            {% if page.host_name %}
                <p class="event-host"><strong>Host:</strong> {{ page.host_name }}, {{ page.host_hospital }}</p>
            {% endif %}
        </div>

    {% if page.is_current == true or page.is_current == "true" %}
        <div class="event-actions">
            {% if page.calendar_link and page.calendar_link != "#" %}
            <a href="{{ page.calendar_link }}" class="btn btn-primary"><i class="fa-solid fa-calendar-plus"></i> Add to Calendar</a>
            {% endif %}
            {% if page.eventbrite_link %}
            <a href="{{ page.eventbrite_link }}" class="btn btn-secondary"><i class="fa-solid fa-ticket"></i> Register on Eventbrite</a>
            {% endif %}
            <button id="download-pdf" class="btn btn-tertiary"><i class="fa-solid fa-file-pdf"></i> Download Programme</button>
        </div>
        {% endif %}
    </header>

    <div class="event-content-wrapper" id="programme-content">
        <div class="event-content">
            {{ content }}
        </div>

        {% if page.schedule %}
        <div class="html2pdf__page-break"></div>
        <section class="schedule">
            <h2>Programme</h2>
            <div class="schedule-table">
                {% for item in page.schedule %}
                <div class="schedule-item">
                    <div class="schedule-time">{{ item.time }}</div>
                    <div class="schedule-content">
                        <strong>{{ item.title }}</strong>
                        {% if item.speaker %}
                        <br><em>
                            {% if item.speaker_link %}
                            <a href="{{ item.speaker_link | relative_url }}">{{ item.speaker }}</a>
                            {% else %}
                            {{ item.speaker }}
                            {% endif %}
                        </em>
                        {% endif %}
                        {% if item.description %}
                        <br><small>{{ item.description }}</small>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </section>
        {% endif %}
    </div>

    {% if page.sponsors or page.acknowledgements %}
    <section class="sponsors">
        <h3>Acknowledgements</h3>
        {% if page.sponsors %}
        <div class="sponsor-logos">
            {% for sponsor in page.sponsors %}
            <img src="{{ sponsor.logo | relative_url }}" alt="{{ sponsor.name }}" class="sponsor-logo">
            {% endfor %}
        </div>
        {% endif %}
        {% if page.acknowledgements %}
        <p>{{ page.acknowledgements }}</p>
        {% endif %}
    </section>
    {% endif %}
</article>

<script>
const downloadBtn = document.getElementById('download-pdf');
if (downloadBtn) downloadBtn.addEventListener('click', function () {
    const element = document.getElementById('programme-content');
    const eventTitle = "{{ page.title | slugify }}";
    const opt = {
        margin:       [0.5, 0.5, 0.5, 0.5],
        filename:     `${eventTitle}-programme.pdf`,
        image:        { type: 'jpeg', quality: 0.98 },
        html2canvas:  { scale: 2, useCORS: true },
        jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' }
    };
    html2pdf().from(element).set(opt).save();
});
</script>
